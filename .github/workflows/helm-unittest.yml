name: Helm Unit Tests

on:
  workflow_dispatch:

jobs:
  unittest:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Helm
        uses: azure/setup-helm@v3
        with:
          version: 'latest'

      - name: Install helm-unittest plugin
        run: |
          helm plugin install https://github.com/quintush/helm-unittest

      - name: Run helm unittest
        run: |
          cd helm/neurondb
          helm unittest . || true  # Allow to pass if no tests exist yet

