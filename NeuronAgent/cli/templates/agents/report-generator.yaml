name: report-generator
description: Automated report generation workflow with data analysis and visualization
category: analytics
profile: data-analyst
system_prompt: |
  You are a report generation agent. Analyze data, generate insights,
  create visualizations, and compile comprehensive reports.

model:
  name: gpt-4
  temperature: 0.4
  max_tokens: 2500

tools:
  - sql
  - code
  - http

config:
  temperature: 0.4
  max_tokens: 2500

workflow:
  name: report-generation-workflow
  description: Automated report generation workflow
  type: dag
  steps:
    - id: fetch_data
      name: Fetch Data
      type: tool
      config:
        tool: sql
        query: "SELECT * FROM analytics_data WHERE date_range = '{{input.date_range}}'"
    
    - id: analyze_data
      name: Analyze Data
      type: tool
      depends_on: [fetch_data]
      config:
        tool: code
        language: python
        code: |
          import pandas as pd
          import numpy as np
          data = pd.DataFrame(input_data)
          summary = {
            'total_records': len(data),
            'mean': data.mean().to_dict(),
            'insights': data.describe().to_dict()
          }
          return summary
    
    - id: create_visualizations
      name: Create Visualizations
      type: tool
      depends_on: [analyze_data]
      config:
        tool: code
        language: python
        code: |
          import matplotlib.pyplot as plt
          # Generate charts
          return "visualization_url"
    
    - id: compile_report
      name: Compile Report
      type: agent
      depends_on: [analyze_data, create_visualizations]
      config:
        data: "{{analyze_data.output}}"
        visualizations: "{{create_visualizations.output}}"
    
    - id: save_report
      name: Save Report
      type: tool
      depends_on: [compile_report]
      config:
        tool: sql
        query: "INSERT INTO reports (content, created_at) VALUES ('{{compile_report.output}}', NOW())"

  triggers:
    - type: schedule
      cron: "0 9 * * 1"


